<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced One Factor Analysis Tool</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/picocss/1.5.0/pico.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="container-fluid">
        <ul>
            <li><strong>One Factor Analysis Tool</strong></li>
        </ul>
        <ul>
            <li><a href="#tool">Tool</a></li>
            <li><a href="#examples">Examples</a></li>
            <li><a href="#description">Description</a></li>
        </ul>
    </nav>

    <main class="container">
        <div class="content-wrapper">
            <section id="tool">
                <h2>Analysis Tool</h2>
                <form>
                    <div class="grid">
                        <label for="numTreatments">
                            Number of Treatments:
                            <input type="number" id="numTreatments" name="numTreatments" value="3" min="2" required>
                        </label>
                        <label for="numReplications">
                            Number of Replications:
                            <input type="number" id="numReplications" name="numReplications" value="4" min="2" required>
                        </label>
                    </div>
                    <div class="grid">
                        <label for="numSets">
                            Number of Sets:
                            <input type="number" id="numSets" name="numSets" value="1" min="1" required>
                        </label>
                        <label for="design">
                            Select Design:
                            <select id="design" name="design" required>
                                <option value="CRD">Completely Randomized Design (CRD)</option>
                                <option value="RBD">Randomized Complete Block Design (RBD)</option>
                            </select>
                        </label>
                    </div>
                    <label for="transformation">
                        Transformation:
                        <select id="transformation" name="transformation" required>
                            <option value="none">No Transformation</option>
                            <option value="square_root">Square Root</option>
                            <option value="angular">Angular</option>
                        </select>
                    </label>
                    <label for="dataInput">
                        Enter Data (space or tab separated):
                        <textarea id="dataInput" name="dataInput" rows="6" required>123 123 131 133
142 149 147 134
147 172 143 139</textarea>
                    </label>
                    <div class="grid">
                        <label for="importData">
                            Import Data:
                            <input type="file" id="importData" accept=".txt" onchange="importData(event)">
                        </label>
                        <button type="button" id="exportBtn" class="secondary" onclick="exportData()">Export Data</button>
                    </div>
                    <button type="button" id="analyzeBtn" onclick="analyzeData()">Analyze Data</button>
                </form>
            </section>

            <section id="results">
                <div id="loadingIndicator" class="loading-indicator"></div>
            </section>

            <section id="examples">
                <h2>Examples</h2>
                <article>
                    <h3>Example 1: Crop Yield Study (CRD)</h3>
                    <p>A researcher wants to compare the yield of three different corn varieties (A, B, C) using a Completely Randomized Design with four replications.</p>
                    <pre><code>123 123 131 133  # Variety A
142 149 147 134  # Variety B
147 172 143 139  # Variety C</code></pre>
                    <button onclick="loadExample(1)">Load Example 1</button>
                </article>
                <article>
                    <h3>Example 2: Fertilizer Effect Study (RBD)</h3>
                    <p>An agronomist is studying the effect of three fertilizer treatments (A, B, C) on tomato plant height using a Randomized Complete Block Design with four blocks.</p>
                    <pre><code>25.0 23.0 24.3 26.5  # Treatment A
28.5 24.9 27.3 29.2  # Treatment B
41.3 42.5 41.3 46.5  # Treatment C</code></pre>
                    <button onclick="loadExample(2)">Load Example 2</button>
                </article>
            </section>

            <section id="description">
                <h2>Description</h2>
                <p>
                    The One Factor Analysis Tool is designed to perform statistical analysis on experimental data with a single factor (treatment) and multiple replications. It supports both Completely Randomized Design (CRD) and Randomized Complete Block Design (RBD).
                </p>
                <h3>Key Features:</h3>
                <ul>
                    <li>Flexible input for multiple treatments and replications</li>
                    <li>Support for CRD and RBD designs</li>
                    <li>Optional data transformations (Square Root and Angular)</li>
                    <li>Calculation of ANOVA table</li>
                    <li>Post-hoc analysis using Tukey's HSD test</li>
                    <li>Visualization of results using bar charts, box plots, and scatter plots</li>
                    <li>Import and export data functionality</li>
                </ul>
                <p>
                    This tool calculates the Sum of Squares (SS), Degrees of Freedom (DF), Mean Squares (MS), and F-value for treatments, blocks (in RBD), and error. It also provides the grand mean and individual treatment means.
                </p>
                <p>
                    Use this tool to analyze your experimental data and draw conclusions about the significance of treatment effects in your study.
                </p>
            </section>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
